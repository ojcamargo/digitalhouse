<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Oswald|PT+Sans+Narrow" rel="stylesheet">
    <link rel="stylesheet" href="atom-one-dark.css"><br>
                  <link rel="stylesheet" href="style.css"><br>
                  <meta name="viewport" content="width=device-<br>width, initial-scale=1.0">
                  <title>JavaScript - Aula 07</title>
  </head>
  <body>
    <section id="sec-0">
      <h1>JAVASCRIPT - AJAX</h1>
    </section>
    <section id="sec-1">
      <div>
        <h1>JSON</h1>
        <div class="sub sub-0">
          <p>O formato de dados de JavaScript Object Notation, ou JSON para abreviar, é<br>
            derivado dos objetos literais da linguagem de programação JavaScript.<br>
            Esse formato de troca de dados é um subconjunto da linguagem JavaScript,<br>
            e não uma linguagem de programação.</p>
          <pre>
            <code class="javascript">
              <div>{</div>
              <div>  "id": 1,</div>
              <div>  "nome": "Tobias",</div>
              <div>  "filmes": ["Toy Story", "Hancock"]</div>
              <div>}</div>
            </code>
          </pre>
        </div>
        <div class="sub sub-1">
          <p>
            Sua estrutura é muito parecida a um objeto literal de JavaScript, com algumas<br>
            diferenças. Os nomes das propriedades são escritos entre aspas duplas, assim como<br>
            os valores de strings.</p>
          <pre>
            <code class="javascript">
              <div>var objetoEmFormatoJSON = '{ "atributo": "valor", "atributo1": 1,</div>
              <div>  "atributo2": [], "atributo3": null, "atributo4": false }';</div>
            </code>
          </pre>
        </div>
        <div class="sub sub-2">
          <p>JavaScript tem um objeto JSON com os métodos stringify() e parse().</p>
          <pre>
            <code class="javascript">
              <div>// Stringify - transforma um objeto JavaScript em uma string JSON.</div>
              <div>let obj = JSON.stringify({users:[{id:1,nome:"Testino"},{id:2,nome:"Barry"}]});</div>
              <div></div>
              <div>// Parse - transforma uma string JSON em um objeto JavaScript.</div>
              <div>let str = JSON.parse('{"categorias":["Cozinha","Sala","Banho","Pets"]}');</div>
            </code>
          </pre>
        </div>
      </div>
    </section>
    <section id="sec-2">
      <h1>AJAX</h1>
    </section>
    <section id="sec-3">
      <div>
        <h1>AJAX</h1>
        <div class="sub sub-0">
          <p>Ajax não é uma tecnologia, mas sim um termo implementado por Jesse James<br>
          Garrett em 2005.</p>

          <p>Ajax significa Asynchronous JavaScript and XML e se transformou em sinônimo<br>
          do desenvolvimento moderno de front-end por um bom motivo. Essa técnica<br>
          oferece a possibilidade de iniciar solicitações HTTP, como GET e POST, sem<br>
          precisar sair da página web atual.</p>

          <p>Por isso, podemos dizer que Ajax é uma técnica para criar páginas dinâmicas.</p>
        </div>
        <div class="sub sub-1">
          <h3>AJAX permite:</h3>
          <ul>
            <li>Atualizar o conteúdo de uma página sem recarregar</li>
            <li>Pedir informações a um servidor</li>
            <li>Receber informações de um servidor</li>
            <li>Enviar informações a um servidor</li>
          </ul>
        </div>
      </div>
    </section>
    <section id="sec-4">
      <div>
        <h1>AJAX - Passos</h1>
        <div class="sub sub-0">
          <h2>1. new XMLHttpRequest()</h2>
          <pre>
            <code class="javascript">
              <div>var xmlhttp = new XMLHttpRequest();</div>
              <div>/*O único método global da interface XMLHttpRequest é o do construtor que, quando</div>
              <div>invocado, retorna ao aplicativo uma nova instância do objeto XMLHttpRequest.</div>
              <div>Através da interface herdada por esse objeto, vamos iniciar e gerenciar solicitações.</div>
              <div></div>
              <div>Como a solicitação HTTP é produzida de forma assíncrona, é necessário que o</div>
              <div>aplicativo seja notificado sobre qualquer mudança de estado enquanto a solicitação</div>
              <div>estiver vigente, por exemplo se a resposta tiver sido fornecida ou se a conexão tiver</div>
              <div>expirado.</div>
              <div></div>
              <div>Essa é uma forma fácil de obter informações de uma URL sem precisar recarregar</div>
              <div>toda a página. XMLHttpRequest é muito usado na programação AJAX.*/</div>
            </code>
          </pre>
        </div>
        <div class="sub sub-1">
          <h2>2. xmlhttp.onreadystatechange</h2>
          <pre>
            <code>
              <div>var xmlhttp = new XMLHttpRequest();</div>
              <div>xmlhttp.onreadystatechange = function() {</div>
              <div>  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {</div>
              <div>    console.log(xmlhttp.responseText);</div>
              <div>    //Meu código</div>
              <div>  }</div>
              <div>};</div>
            </code>
          </pre>
        </div>
        <div class="sub sub-2">
          <ul class="ul-sm">
            <li>xmlhttp.onreadystatechange<br>
             Uma função do objeto JavaScript invocado quando o atributo readyState muda.<br>
             O callback é invocado a partir da interface do usuário.</li>
            <li>xmlhttp.readyState<br>
             0 se não se inicializou, 1 se está carregando, 2 se a solicitação já foi enviada,<br>
             3 se a resposta está sendo baixada e 4 se terminou</li>
          </ul>
        </div>
        <div class="sub sub-3">
          <ul class="ul-sm">
            <li>xmlhttp.status<br>
             O status da resposta ao pedido. Este é o código HTTPresult<br>
             (por exemplo, o status é 200 no caso de uma solicitação bem-sucedida). Somente leitura.</li>
            <li>xmlhttp.responseText<br>
             A resposta ao pedido como texto, ou null se o pedido não teve sucesso<br>
             ou se ainda não foi enviado. Somente leitura.</li>
          </ul>
        </div>
      </div>
    </section>
    <section id="sec-5">
      <div>
        <h1>AJAX - Passos</h1>
        <div class="sub sub-0">
          <h2>3. xmlhttp.open(method, url, async)</h2>
          <pre>
            <code class="javascript">
              <div>xmlhttp.open("GET", "categorias.php", true);</div>
              <div>// Inicializa o pedido. Este método deve ser usado no código JavaScript.</div>
              <div>//-- method --</div>
              <div>// O método HTTP que será usado: "POST" ou "GET". É ignorado para URLs que</div>
              <div>// não são de HTTP.</div>
              <div>//-- url --</div>
              <div>// A URL para a qual o pedido é enviado.</div>
              <div>//-- async --</div>
              <div>// Um parâmetro opcional, booleano, que por padrão é true. Indica se a operação é</div>
              <div>// realizada de forma assíncrona.</div>
            </code>
          </pre>
        </div>
        <div class="sub sub-1">
          <h2>4. xmlhttp.send()</h2>
          <pre>
            <code class="javascript">
              <div>xmlhttp.open("GET", "categorias.php", true);</div>
              <div>xmlhttp.send(); // Envia o pedido</div>
            </code>
          </pre>
        </div>
      </div>
    </section>
    <section id="sec-6">
      <div>
        <h1>AJAX - Completo</h1>
        <pre>
          <code class="javascript">
            <div>var xmlhttp = new XMLHttpRequest();</div>
            <div>xmlhttp.onreadystatechange = function() {</div>
            <div>  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {</div>
            <div>    console.log(xmlhttp.responseText);</div>
            <div>    //Meu código</div>
            <div>  }</div>
            <div>};</div>
            <div>xmlhttp.open("GET", "categorias.php", true);</div>
            <div>xmlhttp.send();</div>
          </code>
        </pre>
      </div>
    </section>
    <section id="sec-7">
      <div>
        <h1>AJAX - Parametros</h1>
        <pre>
          <code class="javascript">
            <div>var xmlhttp = new XMLHttpRequest();</div>
            <div>xmlhttp.onreadystatechange = function() {</div>
            <div>  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {</div>
            <div>    console.log(xmlhttp.responseText);</div>
            <div>    //Meu código</div>
            <div>  }</div>
            <div>};</div>
            <div>xmlhttp.open("POST", "ajax_info.php", true);</div>
            <div>xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");</div>
            <div>var params = "nome=Nicolas&sobrenome=Isnardi";</div>
            <div>xmlhttp.send(params);</div>
          </code>
        </pre>
      </div>
    </section>
    <section id="sec-8">
      <div>
        <h1>AJAX - jQuery</h1>
        <pre>
          <code class="javascript">
            <div>$.ajax({</div>
            <div>  url: 'ajax.php',</div>
            <div>  type: 'POST',</div>
            <div>  data: {nome: "Alexandre", email: "alexandre@digitalhouse.com"},</div>
            <div>  success: function(data){</div>
            <div>    console.log('deu certo', data);</div>
            <div>  },</div>
            <div>  error: function(err){</div>
            <div>    console.log('Erro:', err);</div>
            <div>  }</div>
            <div>});</div>
            <div>// é necessário carregar o jquery antes</div>
          </code>
        </pre>
      </div>
    </section>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="highlight.pack.js"></script>
    <script type="text/javascript" src="script.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Oswald|PT+Sans+Narrow" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript - Aula 06</title>
  </head>
  <body>
    <section id="sec-0">
      <h1>JAVASCRIPT - Formulários e Regex</h1>
    </section>
    <section id="sec-1">
      <h1>Formulários</h1>
    </section>
    <section id="sec-2">
      <div>
        <h3>Formulários</h3>
        <div class="sub sub-0">
          <p>Um dos principais motivos pelos quais a linguagem de programação<br>
            JavaScript foi criada foi a necessidade de validar os dados dos<br>
            formulários diretamente no navegador do usuário.</p>
          <p>Usando JavaScript, é possível gerenciar os valores e eventos do<br>
            formulário e dos elementos dele.</p>
        </div>
        <div class="sub sub-1">
          <p>É possível selecionar um formulário utilizando os métodos para<br>
            selecionar elementos (getElementById, querySelector ...)</p>
          <code>
            <span><span class="command">var</span> form <span class="operator">=</span> document.<span class="command">querySelector</span>(<span class="string">"form"</span>);</span>
          </code>
        </div>
        <div class="sub sub-2">
          <p>Também conseguimos selecionar, utilizando <b>document.forms</b></p>
          <p>A propriedade forms do objeto document retorna uma coleção de objetos<br>
            tipo array contendo todos os formulários existentes no documento HTML,<br>
            com índice 0 para o primeiro formulário por ordem de exibição, índice 1<br>
            para o seguinte e assim sucessivamente.</p>
          <code>
            <span><span class="command">let</span> form <span class="operator">=</span> document.forms[<span class="number">0</span>];</span>
          </code>
        </div>
      </div>
    </section>
    <section id="sec-3">
      <div>
        <h3>Formulários - Atributos</h3>
        <p>O objeto formulário tem atributos como action, target, encoding e method.<br>
          Como são propriedades do objeto <b>form</b>, eles podem ser<br>
          acessados da mesma forma que qualquer outro objeto de JavaScript.</p>
        <code>
          <span class="comment">// action: é a url da página php onde o form será processado.</span>
          <span>form.action <span class="operator">=</span> <span class="string">"/login.php"</span>;</span>
          <span class="comment">// target: é a página(_self, _blank) ou o id do elemento onde será enviado o form</span>
          <span>form.target <span class="operator">=</span> <span class="string">"_self"</span>;</span>
          <span class="comment">// encoding: tipo MIME usado para codificar os dados, equivalente ao enctype do html</span>
          <span>form.encoding <span class="operator">=</span> <span class="string">"multipart/form-data"</span>;</span>
          <span class="comment">// method: é o método de HTTP que será usado para enviar os dados. Pode ser get ou post.</span>
          <span>form.method <span class="operator">=</span> <span class="string">"GET"</span>;</span>
          <span class="comment">// name: nome do formulário.</span>
          <span>form.name <span class="operator">=</span> <span class="string">"formulario"</span>;</span>
        </code>
      </div>
    </section>
    <section id="sec-4">
      <div>
        <h3>document.forms[x].elements</h3>
        <p>A propriedade elements de cada objeto form obtido através de<br>
          <b>document.form</b> retorna uma coleção de objetos tipo array<br>
          contendo todos os campos existentes no formulário concreto ao qual<br>
          fazemos referência, com índice 0 para o primeiro elemento por<br>
          ordem de exibição, índice 1 para o seguinte e assim sucessivamente.</p>
        <code>
          <span class="comment">// Pega uma lista com todos os elementos do form</span>
          <span><span class="command">let</span> elementos <span class="operator">=</span> form.elements;</span>
          <span class="comment">// Pega o primeiro elemento do form</span>
          <span><span class="command">let</span> elemento <span class="operator">=</span> form.elements[<span class="number">0</span>];</span>
        </code>
      </div>
    </section>
    <section id="sec-5">
      <div>
        <h2>Formulários - Elementos - Atributos</h2>
        <p>O objeto de elemento tem atributos como name, id, value.<br>
          Assim como no objeto <b>form</b>, eles podem ser acessados<br>
          da mesma forma que qualquer outro objeto de JavaScript.</p>
        <code>
          <span class="comment">// name: é o nome do elemento.</span>
          <span>elemento.name <span class="operator">=</span> <span class="string">"email"</span>;</span>
          <span class="comment">// id: é o identificador único que identifica o elemento.</span>
          <span>elemento.id <span class="operator">=</span> <span class="string">"email"</span>;</span>
          <span class="comment">// value: é o valor inserido pelo usuário (ou pelo javascript) no elemento.</span>
          <span>elemento.value <span class="operator">=</span> <span class="string">"Novo texto"</span>;</span>
          <span class="comment">// placeholder: é o que fica escrito no campo enquanto ele está vazio.</span>
          <span>elemento.placeholder <span class="operator">=</span> <span class="string">"Escreva seu e-mail"</span>;</span>
        </code>
      </div>
    </section>
    <section id="sec-6">
      <div>
        <h2>Formulários - Elementos</h2>
        <div class="sub sub-0">
          <h3>input</h3>
          <p>O elemento input pode assumir várias formas, dependendo de seu atributo <b>type</b>.<br>
            E em sua maioria pegamos os valores através do atributo <b>value</b></p>
          <code>
            <span class="comment">// type: é o tipo do elemento.</span>
            <span><span class="command">console.log</span>(input.type); <span class="comment">// mostra o tipo do input</span></span>
            <span>input.type <span class="operator">=</span> <span class="string">"text"</span>;</span>
            <span class="comment">// value: é o valor inserido pelo usuário (ou pelo javascript) no elemento.</span>
            <span><span class="command">console.log</span>(input.value); <span class="comment">// mostra o valor do input</span></span>
            <span>input.value <span class="operator">=</span> <span class="string">"Novo texto"</span>;</span>
          </code>
        </div>
        <div class="sub sub-1">
          <h3>select</h3>
          <p>Através dos elementos select, podemos obter o valor escolhido com <b>value</b>.<br>
            O objeto select tem o atributo <b>selectedIndex</b>, que retorna o índice<br>
            numérico da opção selecionada.</p>
          <code>
            <span class="comment">// value: é o valor da opção selecionada.</span>
            <span><span class="command">console.log</span>(select.value); <span class="comment">// mostra o valor do item selecionado</span></span>
            <span class="comment">// selectedIndex: é a posição (índice) do option selecionado.</span>
            <span><span class="command">console.log</span>(select.selectedIndex); <span class="comment">// mostra a posição do item selecionado</span></span>
          </code>
        </div>
        <div class="sub sub-2">
          <h3>select - option</h3>
          <p>Outro atributo do objeto select é options, que retorna a coleção de elementos options.</p>
          <code>
            <span><span class="command">let</span> index <span class="operator">=</span> select.selectedIndex;</span>
            <span><span class="command">console.log</span>(select.options); <span class="comment">// mostra todas as opções possíveis</span></span>
            <span><span class="command">console.log</span>(select.options[index]); <span class="comment">// mostra o option selecionado</span></span>
            <span><span class="command">console.log</span>(select.options[index].value); <span class="comment">// mostra o valor do option selecionado</span></span>
          </code>
        </div>
        <div class="sub sub-3">
          <h3>radio</h3>
          <p>O objeto formulário também tem objetos radio button &lt;input type="radio"&gt;.<br>
            No geral, esse elemento é utilizado para selecionar entre vários valores<br>
            sendo que apenas um pode estar selecionado. Para conseguir isso,<br>
            utilizamos o atributo name igual para todos.</p>
          <p>Por meio do seletor querySelector(), podemos obter o elemento radio button<br>
            que está ativo. Para isso, devemos utilizar um seletor de CSS <b>:checked</b>.</p>
          <code>
            <span><span class="command">let</span> radioBtn <span class="operator">=</span> document.<span class="command">querySelector</span>(<span class="string">".radio:checked"</span>);</span>
            <span><span class="command">console.log</span>(radioBtn.value); <span class="comment">// mostra o valor selecionado</span></span>
          </code>
        </div>
        <div class="sub sub-4">
          <h3>checkbox</h3>
          <p>Outro dos elementos do formulário é o checkbox. Esse objeto tem um<br>
            atributo checked que retorna um valor booleano (true/false) através<br>
            do qual é possível saber se ele foi selecionado.</p>
          <p>O atributo checked pode ser utilizado tanto para obter o valor do objeto<br>
            quanto para estabelecer um novo valor.</p>
          <code>
            <span><span class="command">console.log</span>(checkbox.checked); <span class="comment">// true: caso estiver tickado / false: quando não estiver tickado</span></span>
            <span><span class="command">checkbox.checked <span class="operator">= !</span>checkbox.checked</span>; <span class="comment">// Ticka ou desticka o campo</span></span>
          </code>
        </div>
        <div class="sub sub-5">
          <h3>input hidden</h3>
          <p>Outro dos elementos do formulário é &lt;input type="hidden"&gt;. Esse elemento<br>
            permite incluir um valor oculto no formulário. O usuário não verá esse<br>
            elemento, mas como faz parte do formulário, ele será enviado junto com o<br>
            restante dos dados.</p>
          <p>Por ser um input, pegamos seu valor da mesma maneira.</p>
          <code>
            <span><span class="command">console.log</span>(elementoOculto.value); <span class="comment">// mostra o valor do input</span></span>
            <span>elementoOculto.value <span class="operator">=</span> <span class="string">"Novo valor oculto"</span>;</span>
          </code>
        </div>
        <div class="sub sub-6">
          <h3>textarea</h3>
          <p>Outro dos elementos do formulário é textarea. Esse elemento permite<br>
            escrever várias linhas.</p>
          <p>Com JavaScript, é possível obter e estabelecer o valor de um objeto<br>
            textarea por meio do atributo value.</p>
            <code>
              <span><span class="command">console.log</span>(textarea.value); <span class="comment">// mostra o valor do textarea</span></span>
              <span>textarea.value <span class="operator">=</span> <span class="string">"Novo texto<span class="operator">\r</span>com 2 inhas."</span>;</span>
            </code>
        </div>
      </div>
    </section>
    <section id="sec-7">
      <div>
        <h3>Eventos do Formulário - submit</h3>
        <p>o evento <b>submit</b> ocorre assim que o botão de submit é apertado<br>
          e os dados são enviados para o atributo <b>action</b> logo em seguida.</p>
        <code>
          <span>form.onsubmit <span class="operator">=</span> <span class="command">function</span>() {</span>
          <span>&nbsp;&nbsp;<span class="command">return </span> true; <span class="comment">// o formulário será enviado</span></span>
          <span>}</span>
        </code>
      </div>
    </section>
    <section id="sec-8">
      <div>
        <h3>Eventos - preventDefault()</h3>
        <p>Assim como o restante dos eventos, é possível controlar que o evento<br>
          não seja executado por padrão com o método do evento preventDefault()</p>
        <code>
          <span>form.onsubmit <span class="operator">=</span> <span class="command">function</span>(event) {</span>
          <span>&nbsp;&nbsp;event.<span class="command">preventDefault</span>(); <span class="comment">// o formulário não será enviado</span></span>
          <span>}</span>
        </code>
      </div>
    </section>
    <section id="sec-9">
      <div>
        <h3>Eventos do Elemento</h3>
        <div class="sub sub-0">
          <p>Os elementos do formulário podem gerenciar eventos por meio dos<br>
            métodos: onfocus, onblur, onchange, oninput. Eles também podem<br>
            ser escritos usando o método addEventListener(callback).</p>
            <ul class="ul-sm">
              <li><b>focus</b>: Este evento é disparado quando um elemento é enfocado</li>
              <li><b>blur</b>: Este evento é disparado o foco é removido de um elemento</li>
              <li><b>change</b>: Este evento é disparado quando o valor de um elemento muda</li>
              <li><b>input</b>: Este evento é disparado quando inserimos dados em um elemento</li>
            </ul>
        </div>
        <div class="sub sub-1">
          <code>
            <span>elemento.onfocus <span class="operator">=</span> <span class="command">function</span>(event) {</span>
            <span class="comment">&nbsp;&nbsp;// codigo para rodar quando foca o elemento</span>
            <span>}</span>
            <span>elemento.onblur <span class="operator">=</span> <span class="command">function</span>(event) {</span>
            <span class="comment">&nbsp;&nbsp;// codigo para rodar quando desfocar o elemento</span>
            <span>}</span>
            <span>elemento.onchange <span class="operator">=</span> <span class="command">function</span>(event) {</span>
            <span class="comment">&nbsp;&nbsp;// codigo para rodar quando alterar o valor do elemento</span>
            <span>}</span>
            <span>elemento.oninput <span class="operator">=</span> <span class="command">function</span>(event) {</span>
            <span class="comment">&nbsp;&nbsp;// codigo para rodar quando há entrada de dados no elemento</span>
            <span>}</span>
          </code>
        </div>
      </div>
    </section>
    <section id="sec-10">
      <div>
        <h3>Formulários - Validação</h3>
        <code>
          <span>form.onsubmit <span class="operator">=</span> <span class="command">function</span>(event) {</span>
          <span>&nbsp;&nbsp;<span class="command">let</span> nome <span class="operator">=</span> this.<span class="command">getElementById</span>(<span class="string">"nome"</span>);</span>
          <span>&nbsp;&nbsp;<span class="command">if</span>(nome.value <span class="operator">==</span> <span class="string">""</span>){</span>
          <span>&nbsp;&nbsp;&nbsp;&nbsp;event.<span class="command">preventDefault</span>(); <span class="comment">// o formulário não será enviado</span></span>
          <span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="command">alert</span>(<span class="string">"Nome está em branco!"</span>);</span>
          <span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="command">return </span> false;</span>
          <span>&nbsp;&nbsp;}</span>
          <span>&nbsp;&nbsp;<span class="command">return </span> true; <span class="comment">// o formulário será enviado</span></span>
          <span>}</span>
        </code>
      </div>
    </section>
    <section id="sec-11">
      <div>
        <h3>REGEX</h3>
        <div class="sub sub-0">
          <p>JavaScript tem expressões regulares como tipo de dado e permite encontrar<br>
            padrões de texto em uma string.</p>
          <p>No geral, é possível utilizá-los para validar os campos de texto.</p>
          <p>As expressões regulares ou regex têm um método test() que permite validar<br>
            uma string para saber se ela cumpre a expressão regular.</p>
        </div>
        <div class="sub sub-1">
          <code>
            <span class="comment">// valida que a string tenha números e letras</span>
            <span><span class="command">var</span> regexCampoVazio <span class="operator">=</span> <span class="string">/^[a-z0-9]+$/i</span>;</span>
            <span class="comment">// valida uma estrutura de e-mail. Existem muitas opções para fazer isso</span>
            <span><span class="command">var</span> regexMail <span class="operator">=</span> <span class="string">/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/</span>;</span>
            <span class="comment">// retorna um valor boolean, dependendo se ele cumpre ou não com a expressão regular.</span>
            <span>regexCampoVazio.<span class="command">test</span>(textoParaValidar);</span>
            <span>regexMail.<span class="command">test</span>(textoParaValidar);</span>
          </code>
        </div>
      </div>
    </section>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
  </body>
</html>
